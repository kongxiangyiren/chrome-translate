!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&l(e)}).observe(document,{childList:!0,subtree:!0})}function l(e){if(e.ep)return;e.ep=!0;const l=function(e){const l={};return e.integrity&&(l.integrity=e.integrity),e.referrerPolicy&&(l.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?l.credentials="include":"anonymous"===e.crossOrigin?l.credentials="omit":l.credentials="same-origin",l}(e);fetch(e.href,l)}}();const e={class:"translate h-full"},l={class:"translate-box container mx-auto mt-5"},a={class:"select-box"},t={class:"translate-content mt-3"},u={class:"results"},o={class:"dialog-footer"},r=((e,l)=>{const a=e.__vccOpts||e;for(const[t,u]of l)a[t]=u;return a})(Vue.defineComponent({__name:"App",setup(r){const n=Vue.ref("auto"),d=Vue.ref("zh"),c=[{label:"自动检测",value:"auto"},{label:"中文",value:"zh"},{label:"繁体中文",value:"zh-Hant"},{label:"英语",value:"en"},{label:"西班牙语",value:"es"},{label:"日语",value:"ja"},{label:"阿拉伯语",value:"ar"},{label:"孟加拉语",value:"bn"},{label:"德语",value:"de"},{label:"法语",value:"fr"},{label:"印地语",value:"hi"},{label:"意大利语",value:"it"},{label:"韩语",value:"ko"},{label:"荷兰语",value:"nl"},{label:"波兰语",value:"pl"},{label:"葡萄牙语",value:"pt"},{label:"俄语",value:"ru"},{label:"泰语",value:"th"},{label:"土耳其语",value:"tr"},{label:"越南语",value:"vi"},{label:"保加利亚语",value:"bg"},{label:"捷克语",value:"cs"},{label:"丹麦语",value:"da"},{label:"希腊语",value:"el"},{label:"芬兰语",value:"fi"},{label:"克罗地亚语",value:"hr"},{label:"匈牙利语",value:"hu"},{label:"印度尼西亚语",value:"id"},{label:"爱沙尼亚语",value:"iw"},{label:"立陶宛语",value:"lt"},{label:"挪威语",value:"no"},{label:"罗马尼亚语",value:"ro"},{label:"斯洛文尼亚语",value:"sl"},{label:"瑞典语",value:"sv"},{label:"乌克兰语",value:"uk"}],i=c.filter(e=>"auto"!==e.value),s=Vue.ref(""),v=Vue.ref(""),V=Vue.ref(!1),m=Vue.ref("false"!==localStorage.getItem("dialog")),f=window.location.search,b=new URLSearchParams(f).get("text");function g(){localStorage.setItem("dialog","false"),m.value=!1,V.value=!1,s.value="",v.value=""}async function p(){if(V.value=!0,v.value="",!("LanguageDetector"in window)||!("Translator"in window))return m.value=!0,localStorage.removeItem("dialog"),V.value=!1;if(!s.value)return v.value="",V.value=!1;let e="";if("auto"===n.value){let l;const a=await LanguageDetector.availability();if("unavailable"===a)return m.value=!0,localStorage.removeItem("dialog"),V.value=!1;l="available"===a?await LanguageDetector.create():await LanguageDetector.create({signal:AbortSignal.timeout(3e4),monitor(e){e.addEventListener("downloadprogress",e=>{})}}).catch(e=>{throw ElementPlus.ElMessage.error("自动检测失败,请手动选择语言"),v.value="",V.value=!1,e});const t=await l.detect(s.value);if(!t[0]||!t[0].detectedLanguage)return ElementPlus.ElMessage.error("自动检测失败,请手动选择语言"),v.value="",void(V.value=!1);e=t[0]?.detectedLanguage,l.destroy()}if(n.value===d.value||e===d.value)return v.value=s.value,V.value=!1;const l=await Translator.availability({sourceLanguage:"auto"===n.value?e:n.value,targetLanguage:d.value});let a;if("unavailable"===l)return m.value=!0,localStorage.removeItem("dialog"),V.value=!1;a="available"===l?await Translator.create({sourceLanguage:"auto"===n.value?e:n.value,targetLanguage:d.value}):await Translator.create({signal:AbortSignal.timeout(3e4),sourceLanguage:"auto"===n.value?e:n.value,targetLanguage:d.value,monitor(e){e.addEventListener("downloadprogress",e=>{})}}).catch(e=>{throw ElementPlus.ElMessage.error("创建翻译器失败"),v.value="",V.value=!1,m.value=!0,e});const t=a.translateStreaming(s.value);for await(const u of t)v.value+=u;a.destroy(),V.value=!1}function E(){navigator.clipboard.writeText(v.value)}return b&&(s.value=b,window.history.replaceState({},"",window.location.pathname)),(r,f)=>(Vue.openBlock(),Vue.createElementBlock("div",e,[f[8]||(f[8]=Vue.createElementVNode("div",{class:"top mt-10 text-center"},[Vue.createElementVNode("h1",null,"chrome翻译"),Vue.createElementVNode("h4",{class:"text-gray-500"},"方便 / 易用 / 快捷")],-1)),Vue.createElementVNode("div",l,[Vue.createElementVNode("div",a,[Vue.createVNode(Vue.unref(ElementPlus.ElSelect),{class:"w-30!",modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=e=>n.value=e),placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(c,e=>Vue.createVNode(Vue.unref(ElementPlus.ElOption),{key:e.value,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])),64))]),_:1},8,["modelValue"]),Vue.createVNode(Vue.unref(ElementPlus.ElSelect),{class:"ml-3 w-30!",modelValue:d.value,"onUpdate:modelValue":f[1]||(f[1]=e=>d.value=e),placeholder:"Select"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(i),e=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElOption),{key:e.value,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"]),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{class:"ml-3",type:"primary",onClick:p,loading:V.value},{default:Vue.withCtx(()=>[...f[5]||(f[5]=[Vue.createTextVNode(" 翻译 ",-1)])]),_:1},8,["loading"])]),Vue.createElementVNode("div",t,[Vue.createVNode(Vue.unref(ElementPlus.ElRow),{gutter:20},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{disabled:V.value,modelValue:s.value,"onUpdate:modelValue":f[2]||(f[2]=e=>s.value=e),rows:15,type:"textarea",placeholder:"输入文本内容"},null,8,["disabled","modelValue"])]),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",u,[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:v.value,"onUpdate:modelValue":f[3]||(f[3]=e=>v.value=e),rows:15,type:"textarea",placeholder:"译文",readonly:!0,disabled:V.value},null,8,["modelValue","disabled"]),Vue.createVNode(Vue.unref(ElementPlus.ElIcon),{onClick:E},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(ElementPlusIconsVue.CopyDocument))]),_:1})])]),_:1})]),_:1})])]),Vue.createVNode(Vue.unref(ElementPlus.ElDialog),{modelValue:m.value,"onUpdate:modelValue":f[4]||(f[4]=e=>m.value=e),title:"提示",width:"750"},{footer:Vue.withCtx(()=>[Vue.createElementVNode("div",o,[Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",onClick:g},{default:Vue.withCtx(()=>[...f[6]||(f[6]=[Vue.createTextVNode("确定",-1)])]),_:1})])]),default:Vue.withCtx(()=>[f[7]||(f[7]=Vue.createElementVNode("div",null,[Vue.createElementVNode("div",null,"如果当前浏览器不支持翻译，请通过以下步骤开启翻译功能"),Vue.createElementVNode("h2",{class:"mt-5 text-base"},"Chrome"),Vue.createElementVNode("ul",null,[Vue.createElementVNode("li",null,[Vue.createElementVNode("a",{href:"https://www.google.cn/chrome/",target:"_blank"},"1、下载最新Chrome浏览器")]),Vue.createElementVNode("li",null,"2、访问 chrome://on-device-translation-internals/ 以手动安装和卸载语言包。"),Vue.createElementVNode("li",null,"3、重启浏览器。")])],-1))]),_:1},8,["modelValue"])]))}}),[["__scopeId","data-v-fd1a998d"]]);Vue.createApp(r).mount("#app");
